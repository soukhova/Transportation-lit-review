"0","df_pop <- strsplit(Consensus_only_analysis$`_population`, ""; "", "
"0","                       fixed = T) "
"0","df_pop <- data.frame("
"0","  id=rep(Consensus_only_analysis$`Covidence #`, lengths(df_pop)),"
"0","  pop=unlist(df_pop)) |> "
"0","  mutate(pop = ifelse(pop == ""Vulnerable populations (composite)"", ""Comp. vul"", pop))"
"0",""
"0","df_pop <- df_pop |> group_by(pop) |> summarize(count = n()) |> "
"0","  mutate(count = count/sum(count))"
"0",""
"0","#adding grouping var so they print on plot in the order we want"
"0","df_pop$group <- c(7,9,6,8,2,3,5,10,1,4)"
"0",""
"0","pop_plot <- ggplot(data = df_pop, aes(x = pop, y = count)) +"
"0","  geom_bar(stat=""identity"", fill = c(rep(""skyblue2"",each=8), ""grey"", ""skyblue2""), col = ""black"") + "
"0","  scale_y_continuous(labels=scales::percent, limits = c(0,0.25), breaks = seq(0,0.25, by=0.05))+"
"0","  scale_x_discrete(limits=(df_pop$pop)[order(df_pop$group)]) +"
"0","  coord_flip() +"
"0","  labs(y = ""% of mentions in papers"", subtitle = ""Population groups"") + "
"0","  theme_classic() + "
"0","  theme(text=element_text(size=10),"
"0","        axis.title.y = element_blank())"
